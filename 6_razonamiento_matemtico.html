<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>6¬∫ Razonamiento matem√°tico | Formaci√≥n en Centros - Ceip Joaqu√≠n Tena Artigas </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Ceip Joaqu√≠n Tena Artigas de Alcolea (C√≥rdoba)" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.9 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-19"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegaci√≥n</a></p>
<header id="header" ><div id="headerContent">Formaci√≥n en Centros - Ceip Joaqu√≠n Tena Artigas</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Inicio</a></li>
   <li><a href="formacin_en_centros_2425.html" class="daddy">Formaci√≥n en Centros 24-25</a>
   <ul class="other-section">
      <li><a href="itinerario_infantil.html" class="no-ch">Itinerario Infantil</a></li>
      <li><a href="itinerario_1_ciclo.html" class="no-ch">Itinerario 1¬∫ Ciclo</a></li>
      <li><a href="itinerario_2_ciclo.html" class="no-ch">Itinerario 2¬∫ Ciclo</a></li>
      <li><a href="itinerario_3_ciclo.html" class="no-ch">Itinerario 3¬∫ Ciclo</a></li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="formacin_en_centros_2526.html" class="current-page-parent daddy">Formaci√≥n en Centros 25-26</a>
   <ul>
      <li><a href="infantil.html" class="no-ch">Infantil</a></li>
      <li><a href="1_razonamiento_matemtico.html" class="no-ch">1¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="1_el_huerto_mgico.html" class="no-ch">1¬∫ El Huerto M√°gico</a></li>
      <li><a href="1_comprensin_lectora.html" class="daddy">1¬∫ Comprensi√≥n lectora</a>
      <ul class="other-section">
         <li><a href="1_comprensin_lectora__nivel_bajo.html" class="no-ch">1¬∫ Comprensi√≥n lectora - Nivel Bajo</a></li>
         <li><a href="1_comprensin_lectora__nivel_medio.html" class="no-ch">1¬∫ Comprensi√≥n lectora - Nivel Medio</a></li>
         <li><a href="1_comprensin_lectora__nivel_alto.html" class="no-ch">1¬∫ Comprensi√≥n lectora - Nivel Alto</a></li>
         <li><a href="lecturas_110.html" class="no-ch">Lecturas 1-10</a></li>
         <li><a href="lecturas_1120.html" class="no-ch">Lecturas 11-20</a></li>
         <li><a href="lecturas_2130.html" class="no-ch">Lecturas 21-30</a></li>
      </ul>
      </li>
      <li><a href="2_razonamiento_matemtico.html" class="no-ch">2¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="2_viaje_a_marte.html" class="no-ch">2¬∫ Viaje a Marte</a></li>
      <li><a href="2_comprensin_lectora.html" class="daddy">2¬∫ Comprensi√≥n lectora</a>
      <ul class="other-section">
         <li><a href="2_lecturas__bloque_1.html" class="no-ch">2¬∫ Lecturas - Bloque 1</a></li>
         <li><a href="2_lecturas__bloque_2.html" class="no-ch">2¬∫ Lecturas - Bloque 2</a></li>
         <li><a href="2_lecturas__bloque_3.html" class="no-ch">2¬∫ Lecturas - Bloque 3</a></li>
         <li><a href="2_lecturas__bloque_4.html" class="no-ch">2¬∫ Lecturas - Bloque 4</a></li>
         <li><a href="2_lecturas__bloque_5.html" class="no-ch">2¬∫ Lecturas - Bloque 5</a></li>
         <li><a href="2_lecturas__bloque_6.html" class="no-ch">2¬∫ Lecturas - Bloque 6</a></li>
      </ul>
      </li>
      <li><a href="3_razonamiento_matemtico.html" class="no-ch">3¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="seccin.html" class="no-ch">Secci√≥n</a></li>
      <li><a href="3_olimpiadas_robticas.html" class="no-ch">3¬∫ Olimpiadas rob√≥ticas</a></li>
      <li><a href="4_razonamiento_matemtico.html" class="no-ch">4¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="4_aventura_submarina.html" class="no-ch">4¬∫ Aventura submarina</a></li>
      <li><a href="5_razonamiento_matemtico.html" class="no-ch">5¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="5_la_mquina_del_tiempo.html" class="no-ch">5¬∫ La M√°quina del Tiempo</a></li>
      <li id="active"><a href="6_razonamiento_matemtico.html" class="active no-ch">6¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="6_proyecto_final.html" class="no-ch">6¬∫ Proyecto final</a></li>
   </ul>
   </li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="5_la_mquina_del_tiempo.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="6_proyecto_final.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">6¬∫ Razonamiento matem√°tico</h1></header>
<article class="iDevice_wrapper textIdevice" id="id50">
<div class="iDevice emphasis0" >
<div id="ta50_151_2" class="block iDevice_content">
<div class="exe-text"><p></p>
<style>
    /* IMPORTACI√ìN DE FUENTES */
    @font-face {
        font-family: 'Escolar';
        src: url('Escolar_G.TTF') format('truetype');
        font-weight: normal;
    }
    @font-face {
        font-family: 'Escolar';
        src: url('Escolar_N.TTF') format('truetype');
        font-weight: bold;
    }

    :root {
        /* Paleta 6¬∫ Primaria: Pre-Secundaria (Seria y Elegante) */
        --color-facil: #20bf6b; /* Verde s√≥lido */
        --color-medio: #3867d6; /* Azul real oscuro */
        --color-dificil: #8854d0; /* P√∫rpura intenso */
        --color-bg: #d1d8e0;
        --color-card: #ffffff;
        --text-color: #1e272e;
        --border-radius: 12px;
    }

    body {
        font-family: 'Escolar', 'Comic Sans MS', cursive, sans-serif;
        background-color: var(--color-bg);
        /* Fondo t√©cnico */
        background-image: 
            linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0,0,0,0.05) 1px, transparent 1px);
        background-size: 20px 20px;
        margin: 0;
        padding: 10px;
        color: var(--text-color);
        min-height: auto; 
    }

    .app-container {
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        background: var(--color-card);
        border-radius: var(--border-radius);
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        padding: 30px;
        border: 1px solid #b2bec3;
        display: flex;
        flex-direction: column;
        align-items: center;
        box-sizing: border-box;
    }

    /* PANTALLA INICIO */
    #start-screen {
        text-align: center;
        width: 100%;
    }

    h1 {
        font-family: 'Escolar', cursive;
        font-weight: bold;
        font-size: 2.8em;
        color: #1e272e;
        margin-bottom: 10px;
        border-bottom: 4px solid var(--color-medio);
        display: inline-block;
        padding-bottom: 5px;
    }

    .subtitle {
        font-size: 1.5em;
        color: #636e72;
        margin-bottom: 40px;
        font-weight: bold;
    }

    .level-container {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
    }

    /* BOTONES NIVEL (DIVS S√ìLIDOS) */
    .level-btn {
        font-family: 'Escolar', cursive;
        font-weight: bold;
        font-size: 1.3em;
        padding: 20px;
        border-radius: var(--border-radius);
        cursor: pointer;
        color: white;
        transition: transform 0.2s, box-shadow 0.2s;
        width: 210px;
        max-width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        text-align: center;
        user-select: none;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .level-btn:hover { transform: translateY(-4px); box-shadow: 0 8px 12px rgba(0,0,0,0.2); }
    
    .btn-easy { background: linear-gradient(135deg, #26de81, #20bf6b); }
    .btn-medium { background: linear-gradient(135deg, #4b7bec, #3867d6); }
    .btn-hard { background: linear-gradient(135deg, #a55eea, #8854d0); }

    .icon-level { font-size: 2em; margin-bottom: 10px; display: block; line-height: 1; }
    .text-level { display: block; width: 100%; }

    /* PANTALLA JUEGO */
    #game-screen {
        display: none;
        width: 100%;
        text-align: center;
    }

    .header-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        width: 100%;
        font-size: 1.2em;
        color: #636e72;
        border-bottom: 2px solid #dfe6e9;
        padding-bottom: 10px;
    }

    .progress-bar-container {
        width: 100%;
        height: 8px;
        background-color: #dfe6e9;
        border-radius: 4px;
        margin-bottom: 25px;
        overflow: hidden;
    }

    .progress-bar {
        height: 100%;
        background-color: var(--color-medio);
        width: 0%;
        transition: width 0.5s;
    }

    .problem-card {
        background: #f1f2f6;
        border-left: 6px solid var(--color-medio);
        border-radius: 8px;
        padding: 30px;
        margin-bottom: 30px;
        font-size: 1.6em;
        line-height: 1.5;
        min-height: 160px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        text-align: left;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }

    .data-highlight {
        color: #c0392b;
        font-weight: bold;
        background: rgba(231, 76, 60, 0.1);
        padding: 0 5px;
        border-radius: 4px;
    }

    .options-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .option-btn {
        font-family: 'Escolar', cursive;
        font-weight: bold;
        font-size: 1.6em;
        padding: 15px;
        background: white;
        border: 2px solid #b2bec3;
        border-radius: 10px;
        cursor: pointer;
        color: #2d3436;
        transition: all 0.2s;
        box-shadow: 0 4px 0 #b2bec3;
    }

    .option-btn:hover {
        background: #dfe6e9;
        transform: translateY(-2px);
    }
    
    .option-btn:active {
        transform: translateY(2px);
        box-shadow: none;
    }

    .feedback {
        margin-top: 15px;
        font-size: 2em;
        font-weight: bold;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .feedback.correct { color: var(--color-facil); }
    .feedback.incorrect { color: #eb3b5a; }

    /* PANTALLA RESULTADOS */
    #result-screen {
        display: none;
        text-align: center;
    }

    .score-box {
        background: #1e272e;
        color: white;
        padding: 20px 50px;
        border-radius: 15px;
        font-size: 4em;
        font-weight: bold;
        display: inline-block;
        margin: 30px 0;
        box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }

    .home-btn {
        background-color: var(--color-medio);
        color: white;
        padding: 15px 40px;
        border-radius: 50px;
        font-size: 1.5em;
        border: none;
        cursor: pointer;
        font-family: 'Escolar', cursive;
        box-shadow: 0 5px 0 #1e3799;
        margin-top: 20px;
        transition: transform 0.1s;
    }
    .home-btn:hover { transform: translateY(-2px); }

</style>
<div class="app-container"><!-- PANTALLA INICIO -->
<div id="start-screen">
<h1>üéì Mates 6¬∫ Primaria</h1>
<p class="subtitle">Preparaci√≥n para Secundaria</p>
<p style="font-size: 1.6em; margin-bottom: 30px;">Selecciona tu especialidad:</p>
<div class="level-container"><!-- NIVEL 1 -->
<div class="level-btn btn-easy" onclick="startGame('easy')"><span class="icon-level">üìä</span>
<div class="text-level">Analista<br /><span style="font-size: 0.7em; font-weight: normal;">Decimales y Medidas</span></div>
</div>
<!-- NIVEL 2 -->
<div class="level-btn btn-medium" onclick="startGame('medium')"><span class="icon-level">‚öôÔ∏è</span>
<div class="text-level">Ingeniero<br /><span style="font-size: 0.7em; font-weight: normal;">Geometr√≠a y %</span></div>
</div>
<!-- NIVEL 3 -->
<div class="level-btn btn-hard" onclick="startGame('hard')"><span class="icon-level">üî¨</span>
<div class="text-level">Cient√≠fico<br /><span style="font-size: 0.7em; font-weight: normal;">L√≥gica y Proporci√≥n</span></div>
</div>
</div>
<p style="margin-top: 40px; color: #aaa; font-size: 1em;">Basado en est√°ndares de 6¬∫ de Primaria.</p>
</div>
<!-- PANTALLA JUEGO -->
<div id="game-screen">
<div class="header-info"><span>Nivel: <span id="level-label" style="font-weight: bold;"></span></span> <span>Ejercicio <span id="q-number">1</span>/10</span></div>
<div class="progress-bar-container">
<div class="progress-bar" id="progress-bar"></div>
</div>
<div class="problem-card" id="problem-card">
<div id="problem-text"></div>
</div>
<div class="options-container" id="options-area"></div>
<div class="feedback" id="feedback-area"></div>
</div>
<!-- PANTALLA RESULTADOS -->
<div id="result-screen">
<h1>¬°Prueba Finalizada!</h1>
<p style="font-size: 1.6em;">Resultado final:</p>
<div class="score-box"><span id="final-score">0</span>/10</div>
<div id="final-message" style="font-size: 1.6em; margin-bottom: 20px; color: #1e272e;"></div>
<button class="home-btn" onclick="location.reload()">üîÑ Nueva Prueba</button></div>
</div>
<p>
<script>
    // --- DATOS Y CONTEXTOS ---
    const cities = ["Madrid", "Barcelona", "Valencia", "Sevilla", "Bilbao", "M√°laga"];
    const products = [
        { name: "zapatillas", basePrice: 60 },
        { name: "bicicleta", basePrice: 200 },
        { name: "tablet", basePrice: 300 },
        { name: "mochila", basePrice: 40 },
        { name: "chaqueta", basePrice: 80 }
    ];

    let currentSeries = [];
    let currentQuestion = 0;
    let score = 0;
    let isAnswering = false;

    // --- FUNCIONES AUXILIARES ---
    function getRandomInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
    function getRandomItem(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
    function formatMoney(amount) { return amount.toFixed(2).replace('.', ','); }

    // --- GENERADORES DE PROBLEMAS (6¬∫ PRIMARIA) ---

    // NIVEL 1: ANALISTA (Decimales complejos, Operaciones combinadas, Unidades)
    function generateEasy() {
        let scenario = getRandomInt(1, 3);
        let problem = {};
        
        if (scenario === 1) { // Compra con decimales y cambio (Supermercado)
            let kgFruta = getRandomInt(2, 5);
            let precioFruta = getRandomInt(150, 250) / 100;
            let kgCarne = getRandomInt(1, 3);
            let precioCarne = getRandomInt(800, 1200) / 100;
            
            let total = (kgFruta * precioFruta) + (kgCarne * precioCarne);
            let pago = Math.ceil(total / 10) * 10;
            if (pago - total < 2) pago += 10; // Asegurar vuelta decente
            
            let vuelta = pago - total;
            
            problem.text = `He comprado <span class="data-highlight">${kgFruta} kg</span> de manzanas a <span class="data-highlight">${formatMoney(precioFruta)} ‚Ç¨/kg</span> y <span class="data-highlight">${kgCarne} kg</span> de filetes a <span class="data-highlight">${formatMoney(precioCarne)} ‚Ç¨/kg</span>. Si pago con un billete de <span class="data-highlight">${pago} ‚Ç¨</span>...<br><br>¬øCu√°nto me devuelven?`;
            problem.correct = parseFloat(vuelta.toFixed(2));
        } else if (scenario === 2) { // Fracci√≥n de un n√∫mero (Capacidad/P√∫blico)
            let total = getRandomInt(500, 2000);
            // Hacer divisible por 4, 5 o 10
            let den = [4, 5, 10][getRandomInt(0, 2)];
            total = Math.ceil(total / den) * den;
            let num = getRandomInt(1, den - 1);
            
            let parte = (total / den) * num;
            
            problem.text = `En un concierto con <span class="data-highlight">${total}</span> espectadores, <span class="data-highlight">${num}/${den}</span> son menores de edad.<br><br>¬øCu√°ntos menores de edad hay en el concierto?`;
            problem.correct = parte;
        } else { // Tiempo (Suma compleja)
            let h1 = getRandomInt(1, 3);
            let m1 = getRandomInt(20, 50);
            let h2 = getRandomInt(1, 2);
            let m2 = getRandomInt(20, 50);
            
            let totalMin = (h1 * 60 + m1) + (h2 * 60 + m2);
            let hTotal = Math.floor(totalMin / 60);
            let mTotal = totalMin % 60;
            
            problem.text = `Un corredor entren√≥ <span class="data-highlight">${h1}h ${m1}min</span> por la ma√±ana y <span class="data-highlight">${h2}h ${m2}min</span> por la tarde.<br><br>¬øCu√°nto tiempo entren√≥ en total?`;
            problem.correct = `${hTotal}h ${mTotal}min`;
            problem.isText = true;
        }
        return problem;
    }

    // NIVEL 2: INGENIERO (Geometr√≠a, Porcentajes, Escalas/Mapas)
    function generateMedium() {
        let scenario = getRandomInt(1, 3);
        let problem = {};
        
        if (scenario === 1) { // Porcentaje (Descuento)
            let item = getRandomItem(products);
            let price = item.basePrice + getRandomInt(-10, 20);
            let discount = [10, 20, 25, 50][getRandomInt(0, 3)];
            
            let amountDisc = (price * discount) / 100;
            let finalPrice = price - amountDisc;
            
            problem.text = `Unas ${item.name} cuestan <span class="data-highlight">${price} ‚Ç¨</span>, pero hoy tienen un descuento del <span class="data-highlight">${discount}%</span>.<br><br>¬øCu√°nto pagar√© finalmente?`;
            problem.correct = parseFloat(finalPrice.toFixed(2));
        } else if (scenario === 2) { // √Årea Compuesta o C√≠rculo
            let radio = getRandomInt(2, 10);
            // √Årea c√≠rculo = pi * r^2. Simplificamos pi a 3.14
            let area = 3.14 * radio * radio;
            
            problem.text = `Calcula el √°rea de un jard√≠n circular que tiene <span class="data-highlight">${radio} metros</span> de radio. (Usa pi = 3,14).<br><br>¬øCu√°ntos m¬≤ mide?`;
            problem.correct = parseFloat(area.toFixed(2));
        } else { // Escala / Distancia
            let cmMapa = getRandomInt(5, 15);
            let escala = 500000; // 1:500.000 (1cm = 5km)
            let kmReales = (cmMapa * escala) / 100000;
            
            problem.text = `En un mapa a escala 1:500.000, dos pueblos est√°n separados por <span class="data-highlight">${cmMapa} cm</span>.<br><br>¬øCu√°l es la distancia real en Kil√≥metros?`;
            problem.correct = kmReales;
        }
        return problem;
    }

    // NIVEL 3: CIENT√çFICO (Proporcionalidad, L√≥gica Inversa, Volumen)
    function generateHard() {
        let scenario = getRandomInt(1, 3);
        let problem = {};
        
        if (scenario === 1) { // Regla de tres directa (Proporcionalidad)
            let k1 = getRandomInt(2, 5);
            let p1 = k1 * getRandomInt(4, 8); // Precio base entero
            let k2 = getRandomInt(7, 12);
            
            let unitPrice = p1 / k1;
            let p2 = unitPrice * k2;
            
            problem.text = `Si <span class="data-highlight">${k1} kg</span> de pintura cuestan <span class="data-highlight">${p1} ‚Ç¨</span>...<br><br>¬øCu√°nto costar√°n <span class="data-highlight">${k2} kg</span> de la misma pintura?`;
            problem.correct = parseFloat(p2.toFixed(2));
        } else if (scenario === 2) { // Volumen (Piscina/Dep√≥sito)
            let l = getRandomInt(10, 25);
            let w = getRandomInt(5, 10);
            let h = 2; // Profundidad
            let volM3 = l * w * h;
            let litros = volM3 * 1000; // 1m3 = 1000L
            
            problem.text = `Una piscina mide <span class="data-highlight">${l}m</span> de largo, <span class="data-highlight">${w}m</span> de ancho y <span class="data-highlight">${h}m</span> de profundidad.<br><br>¬øCu√°ntos LITROS de agua caben en ella?`;
            problem.correct = litros;
        } else { // Problema inverso (Porcentaje o Fracci√≥n)
            let precioFinal = getRandomInt(20, 80) * 10; // Ej: 40
            let porcentajePagado = 100 - [20, 50][getRandomInt(0, 1)]; // Si me descuentan 20, pago 80
            let descuento = 100 - porcentajePagado;
            
            // Queremos que el precio original sea entero.
            // PrecioFinal = Original * (Pagado/100) -> Original = PrecioFinal / (Pagado/100)
            // Ajustamos el PrecioFinal para que salga redondo.
            
            let original = (precioFinal / (porcentajePagado/100));
            
            problem.text = `He pagado <span class="data-highlight">${precioFinal} ‚Ç¨</span> por un abrigo que estaba rebajado un <span class="data-highlight">${descuento}%</span>.<br><br>¬øCu√°nto costaba el abrigo ANTES de la rebaja?`;
            problem.correct = original;
        }
        return problem;
    }

    function generateOptions(correctAnswer, isText = false) {
        let options = new Set();
        options.add(correctAnswer);
        
        while (options.size < 3) {
            if (isText) {
                // Generar tiempos falsos
                let parts = correctAnswer.split(' '); // "2h 30min"
                let h = parseInt(parts[0].replace('h',''));
                let m = parseInt(parts[1].replace('min',''));
                
                let fakeH = h + getRandomInt(-1, 1);
                let fakeM = m + getRandomInt(-15, 15);
                
                if (fakeM >= 60) { fakeM -= 60; fakeH++; }
                if (fakeM < 0) { fakeM += 60; fakeH--; }
                if (fakeH < 0) fakeH = 0;
                
                options.add(`${fakeH}h ${fakeM}min`);
            } else {
                // Errores num√©ricos
                let val = parseFloat(correctAnswer);
                let fake;
                let errorType = getRandomInt(1, 4);
                
                if (errorType === 1) fake = val + getRandomInt(-5, 5);
                else if (errorType === 2) fake = val * 1.1; // +10%
                else if (errorType === 3) fake = val * 0.5; // Mitad
                else fake = val * 2; // Doble
                
                if (!Number.isInteger(val)) fake = parseFloat(fake.toFixed(2));
                else fake = Math.round(fake);

                if (fake > 0 && fake !== val) options.add(fake);
            }
        }
        return Array.from(options).sort(() => Math.random() - 0.5);
    }

    // --- L√ìGICA DEL JUEGO ---

    function startGame(level) {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'block';
        
        let label = "";
        if(level === 'easy') label = "Analista";
        if(level === 'medium') label = "Ingeniero";
        if(level === 'hard') label = "Cient√≠fico";
        document.getElementById('level-label').innerText = label;

        score = 0;
        currentQuestion = 0;
        currentSeries = [];

        for(let i=0; i<10; i++) {
            let p;
            if(level === 'easy') p = generateEasy();
            if(level === 'medium') p = generateMedium();
            if(level === 'hard') p = generateHard();
            
            p.options = generateOptions(p.correct, p.isText);
            currentSeries.push(p);
        }
        renderQuestion();
    }

    function renderQuestion() {
        isAnswering = false;
        let q = currentSeries[currentQuestion];
        
        document.getElementById('q-number').innerText = currentQuestion + 1;
        document.getElementById('progress-bar').style.width = ((currentQuestion) * 10) + "%";
        document.getElementById('problem-text').innerHTML = q.text;
        
        let feedback = document.getElementById('feedback-area');
        feedback.innerHTML = "";
        feedback.className = "feedback";

        let optionsHTML = "";
        q.options.forEach(opt => {
            let displayOpt = opt;
            // Formatear si es n√∫mero grande
            if (typeof opt === 'number' && opt > 9999) displayOpt = opt.toLocaleString();
            // Formatear si parece dinero
            if (typeof opt === 'number' && !Number.isInteger(opt) && opt < 1000) displayOpt = formatMoney(opt) + " ‚Ç¨";
            
            optionsHTML += `<div class="option-btn" onclick="checkAnswer('${opt}', this)">${displayOpt}</div>`;
        });
        document.getElementById('options-area').innerHTML = optionsHTML;
    }

    function checkAnswer(selectedVal, btnElement) {
        if(isAnswering) return;
        isAnswering = true;

        let q = currentSeries[currentQuestion];
        let isCorrect = false;
        
        if (q.isText) {
            isCorrect = (selectedVal === q.correct);
        } else {
            isCorrect = (parseFloat(selectedVal) === q.correct);
        }

        let feedback = document.getElementById('feedback-area');

        if(isCorrect) {
            score++;
            btnElement.style.backgroundColor = "var(--color-facil)"; 
            btnElement.style.color = "white";
            btnElement.style.borderColor = "var(--color-facil)";
            feedback.innerHTML = "¬°CORRECTO! üéØ";
            feedback.classList.add("correct");
        } else {
            btnElement.style.backgroundColor = "#e74c3c"; // Rojo error 
            btnElement.style.color = "white";
            btnElement.style.borderColor = "#e74c3c";
            
            let displayCorrect = q.correct;
            if(typeof q.correct === 'number' && !Number.isInteger(q.correct)) displayCorrect = formatMoney(q.correct);
            
            feedback.innerHTML = `Soluci√≥n: ${displayCorrect}`;
            feedback.classList.add("incorrect");
        }

        setTimeout(() => {
            currentQuestion++;
            if(currentQuestion < 10) {
                renderQuestion();
            } else {
                showResults();
            }
        }, 2500);
    }

    function showResults() {
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-score').innerText = score;
        
        let msg = "";
        if(score === 10) msg = "¬°Est√°s listo para Secundaria! üéì";
        else if(score >= 8) msg = "¬°Brillante! Casi un matem√°tico puro. ‚ú®";
        else if(score >= 5) msg = "¬°Aprobado! Buenos fundamentos. üìö";
        else msg = "Repasa un poco antes del instituto. üìù";
        
        document.getElementById('final-message').innerText = msg;
    }

</script>
</p></div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Licencia Creative Commons Reconocimiento Compartir igual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="5_la_mquina_del_tiempo.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="6_proyecto_final.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Creado con eXeLearning<span> (Ventana nueva)</span></span></a></p><script type="text/javascript" src="_simplepoint_js.js"></script></body></html>