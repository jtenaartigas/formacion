<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>4¬∫ Razonamiento matem√°tico | Formaci√≥n en Centros - Ceip Joaqu√≠n Tena Artigas </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Ceip Joaqu√≠n Tena Artigas de Alcolea (C√≥rdoba)" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.9 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-15"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegaci√≥n</a></p>
<header id="header" ><div id="headerContent">Formaci√≥n en Centros - Ceip Joaqu√≠n Tena Artigas</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Inicio</a></li>
   <li><a href="formacin_en_centros_2425.html" class="daddy">Formaci√≥n en Centros 24-25</a>
   <ul class="other-section">
      <li><a href="itinerario_infantil.html" class="no-ch">Itinerario Infantil</a></li>
      <li><a href="itinerario_1_ciclo.html" class="no-ch">Itinerario 1¬∫ Ciclo</a></li>
      <li><a href="itinerario_2_ciclo.html" class="no-ch">Itinerario 2¬∫ Ciclo</a></li>
      <li><a href="itinerario_3_ciclo.html" class="no-ch">Itinerario 3¬∫ Ciclo</a></li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="formacin_en_centros_2526.html" class="current-page-parent daddy">Formaci√≥n en Centros 25-26</a>
   <ul>
      <li><a href="infantil.html" class="no-ch">Infantil</a></li>
      <li><a href="1_razonamiento_matemtico.html" class="no-ch">1¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="1_el_huerto_mgico.html" class="no-ch">1¬∫ El Huerto M√°gico</a></li>
      <li><a href="1_comprensin_lectora.html" class="daddy">1¬∫ Comprensi√≥n lectora</a>
      <ul class="other-section">
         <li><a href="1_comprensin_lectora__nivel_bajo.html" class="no-ch">1¬∫ Comprensi√≥n lectora - Nivel Bajo</a></li>
         <li><a href="1_comprensin_lectora__nivel_medio.html" class="no-ch">1¬∫ Comprensi√≥n lectora - Nivel Medio</a></li>
         <li><a href="1_comprensin_lectora__nivel_alto.html" class="no-ch">1¬∫ Comprensi√≥n lectora - Nivel Alto</a></li>
         <li><a href="lecturas_110.html" class="no-ch">Lecturas 1-10</a></li>
         <li><a href="lecturas_1120.html" class="no-ch">Lecturas 11-20</a></li>
         <li><a href="lecturas_2130.html" class="no-ch">Lecturas 21-30</a></li>
      </ul>
      </li>
      <li><a href="2_razonamiento_matemtico.html" class="no-ch">2¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="2_viaje_a_marte.html" class="no-ch">2¬∫ Viaje a Marte</a></li>
      <li><a href="2_comprensin_lectora.html" class="daddy">2¬∫ Comprensi√≥n lectora</a>
      <ul class="other-section">
         <li><a href="2_lecturas__bloque_1.html" class="no-ch">2¬∫ Lecturas - Bloque 1</a></li>
         <li><a href="2_lecturas__bloque_2.html" class="no-ch">2¬∫ Lecturas - Bloque 2</a></li>
         <li><a href="2_lecturas__bloque_3.html" class="no-ch">2¬∫ Lecturas - Bloque 3</a></li>
         <li><a href="2_lecturas__bloque_4.html" class="no-ch">2¬∫ Lecturas - Bloque 4</a></li>
         <li><a href="2_lecturas__bloque_5.html" class="no-ch">2¬∫ Lecturas - Bloque 5</a></li>
         <li><a href="2_lecturas__bloque_6.html" class="no-ch">2¬∫ Lecturas - Bloque 6</a></li>
      </ul>
      </li>
      <li><a href="3_razonamiento_matemtico.html" class="no-ch">3¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="seccin.html" class="no-ch">Secci√≥n</a></li>
      <li><a href="3_olimpiadas_robticas.html" class="no-ch">3¬∫ Olimpiadas rob√≥ticas</a></li>
      <li id="active"><a href="4_razonamiento_matemtico.html" class="active no-ch">4¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="4_aventura_submarina.html" class="no-ch">4¬∫ Aventura submarina</a></li>
      <li><a href="5_razonamiento_matemtico.html" class="no-ch">5¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="5_la_mquina_del_tiempo.html" class="no-ch">5¬∫ La M√°quina del Tiempo</a></li>
      <li><a href="6_razonamiento_matemtico.html" class="no-ch">6¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="6_proyecto_final.html" class="no-ch">6¬∫ Proyecto final</a></li>
   </ul>
   </li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="3_olimpiadas_robticas.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="4_aventura_submarina.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">4¬∫ Razonamiento matem√°tico</h1></header>
<article class="iDevice_wrapper textIdevice" id="id48">
<div class="iDevice emphasis0" >
<div id="ta48_149_2" class="block iDevice_content">
<div class="exe-text"><p></p>
<style>
    /* IMPORTACI√ìN DE FUENTES */
    @font-face {
        font-family: 'Escolar';
        src: url('Escolar_G.TTF') format('truetype');
        font-weight: normal;
    }
    @font-face {
        font-family: 'Escolar';
        src: url('Escolar_N.TTF') format('truetype');
        font-weight: bold;
    }

    :root {
        /* Paleta 4¬∫ Primaria: M√°s din√°mica */
        --color-facil: #0fb9b1; /* Turquesa oscuro */
        --color-medio: #8854d0; /* Violeta */
        --color-dificil: #fa8231; /* Naranja intenso */
        --color-bg: #d1d8e0;
        --color-card: #ffffff;
        --text-color: #2d3436;
    }

    body {
        font-family: 'Escolar', 'Comic Sans MS', cursive, sans-serif;
        background-color: var(--color-bg);
        /* Patr√≥n geom√©trico sutil */
        background-image: 
            radial-gradient(#a5b1c2 2px, transparent 2px);
        background-size: 20px 20px;
        margin: 0;
        padding: 10px;
        color: var(--text-color);
        min-height: auto; 
    }

    .app-container {
        width: 100%;
        max-width: 750px;
        margin: 0 auto;
        background: var(--color-card);
        border-radius: 25px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        padding: 25px;
        border: 5px solid #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        box-sizing: border-box;
    }

    /* PANTALLA INICIO */
    #start-screen {
        text-align: center;
        width: 100%;
    }

    h1 {
        font-family: 'Escolar', cursive;
        font-weight: bold;
        font-size: 2.5em;
        color: #8854d0;
        margin-bottom: 5px;
        text-shadow: 2px 2px 0 #a5b1c2;
    }

    .subtitle {
        font-size: 1.4em;
        color: #778ca3;
        margin-bottom: 30px;
        font-weight: bold;
    }

    .level-container {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
    }

    /* BOTONES NIVEL (DIVS S√ìLIDOS) */
    .level-btn {
        font-family: 'Escolar', cursive;
        font-weight: bold;
        font-size: 1.4em;
        padding: 20px;
        border-radius: 20px;
        cursor: pointer;
        color: white;
        transition: transform 0.2s, box-shadow 0.2s;
        width: 200px;
        max-width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        text-align: center;
        user-select: none;
    }

    .level-btn:hover { transform: translateY(-4px); }
    
    .btn-easy { 
        background-color: var(--color-facil); 
        box-shadow: 0 6px 0 #079992; 
    }
    .btn-medium { 
        background-color: var(--color-medio); 
        box-shadow: 0 6px 0 #5f27cd; 
    }
    .btn-hard { 
        background-color: var(--color-dificil); 
        box-shadow: 0 6px 0 #e55039; 
    }

    .icon-level { font-size: 2em; margin-bottom: 5px; display: block; line-height: 1; }
    .text-level { display: block; width: 100%; }

    /* PANTALLA JUEGO */
    #game-screen {
        display: none;
        width: 100%;
        text-align: center;
    }

    .header-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        width: 100%;
        font-size: 1.1em;
        color: #aaa;
    }

    .progress-bar-container {
        width: 100%;
        height: 12px;
        background-color: #dfe6e9;
        border-radius: 10px;
        margin-bottom: 20px;
        overflow: hidden;
    }

    .progress-bar {
        height: 100%;
        background-color: #fa8231;
        width: 0%;
        transition: width 0.5s;
    }

    .problem-card {
        background: #fff;
        border: 3px solid #a55eea;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 25px;
        font-size: 1.5em;
        line-height: 1.4;
        min-height: 140px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        box-shadow: inset 0 0 20px rgba(165, 94, 234, 0.1);
        position: relative;
    }

    .data-highlight {
        color: #eb3b5a;
        font-weight: bold;
        background: #fc5c6533; /* Fondo rojizo suave */
        padding: 0 4px;
        border-radius: 4px;
    }

    .options-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 15px;
        margin-bottom: 10px;
    }

    .option-btn {
        font-family: 'Escolar', cursive;
        font-weight: bold;
        font-size: 1.8em;
        padding: 15px;
        background: white;
        border: 3px solid #8854d0;
        border-radius: 15px;
        cursor: pointer;
        color: #8854d0;
        transition: all 0.2s;
        box-shadow: 0 4px 0 rgba(136, 84, 208, 0.2);
    }

    .option-btn:hover {
        transform: translateY(-2px);
        background: #8854d0;
        color: white;
    }
    
    .option-btn:active {
        transform: translateY(2px);
        box-shadow: none;
    }

    .feedback {
        margin-top: 10px;
        font-size: 1.8em;
        font-weight: bold;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .feedback.correct { color: #0fb9b1; }
    .feedback.incorrect { color: #eb3b5a; }

    /* PANTALLA RESULTADOS */
    #result-screen {
        display: none;
        text-align: center;
    }

    .score-circle {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background: #fa8231;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 20px auto;
        border: 5px solid #e55039;
        font-size: 4em;
        color: #fff;
        text-shadow: 2px 2px 0 rgba(0,0,0,0.2);
        font-weight: bold;
    }

    .home-btn {
        background-color: #4b6584;
        color: white;
        padding: 15px 35px;
        border-radius: 50px;
        font-size: 1.4em;
        border: none;
        cursor: pointer;
        font-family: 'Escolar', cursive;
        box-shadow: 0 5px 0 #1e272e;
        margin-top: 20px;
    }
    .home-btn:hover { transform: scale(1.05); }

</style>
<div class="app-container"><!-- PANTALLA INICIO -->
<div id="start-screen">
<h1>üß† Mates 4¬∫ Primaria</h1>
<p class="subtitle">Resoluci√≥n de Problemas</p>
<p style="font-size: 1.6em; margin-bottom: 25px;">Elige tu reto:</p>
<div class="level-container"><!-- NIVEL 1 -->
<div class="level-btn btn-easy" onclick="startGame('easy')"><span class="icon-level">üßó</span>
<div class="text-level">Escalador<br /><span style="font-size: 0.7em; font-weight: normal;">Operaciones B√°sicas</span></div>
</div>
<!-- NIVEL 2 -->
<div class="level-btn btn-medium" onclick="startGame('medium')"><span class="icon-level">üß™</span>
<div class="text-level">Cient√≠fico<br /><span style="font-size: 0.7em; font-weight: normal;">Fracciones y Euros</span></div>
</div>
<!-- NIVEL 3 -->
<div class="level-btn btn-hard" onclick="startGame('hard')"><span class="icon-level">üöÄ</span>
<div class="text-level">Astronauta<br /><span style="font-size: 0.7em; font-weight: normal;">L√≥gica y Medidas</span></div>
</div>
</div>
<p style="margin-top: 30px; color: #aaa; font-size: 1em;">Generador infinito de problemas.</p>
</div>
<!-- PANTALLA JUEGO -->
<div id="game-screen">
<div class="header-info"><span>Nivel: <span id="level-label" style="font-weight: bold;"></span></span> <span>Problema <span id="q-number">1</span>/10</span></div>
<div class="progress-bar-container">
<div class="progress-bar" id="progress-bar"></div>
</div>
<div class="problem-card" id="problem-card">
<div id="problem-text"></div>
</div>
<div class="options-container" id="options-area"></div>
<div class="feedback" id="feedback-area"></div>
</div>
<!-- PANTALLA RESULTADOS -->
<div id="result-screen">
<h1>¬°Misi√≥n Cumplida! üåü</h1>
<p style="font-size: 1.6em;">Tu puntuaci√≥n final:</p>
<div class="score-circle"><span id="final-score">0</span></div>
<div id="final-message" style="font-size: 1.6em; margin-bottom: 20px; color: #8854d0; padding: 0 20px;"></div>
<button class="home-btn" onclick="location.reload()">üîÑ Nueva Misi√≥n</button></div>
</div>
<p>
<script>
    // --- DATOS Y CONTEXTOS ---
    const names = ["√Ålex", "Sof√≠a", "Mart√≠n", "Luc√≠a", "Hugo", "Valeria", "Pablo", "Alba", "Daniel", "Emma"];
    
    // Objetos para problemas de compra/venta
    const storeItems = [
        { name: "videojuego", price: 45 },
        { name: "zapatillas", price: 32 },
        { name: "raqueta", price: 24 },
        { name: "monopat√≠n", price: 55 },
        { name: "casco", price: 18 },
        { name: "mochila", price: 28 }
    ];

    let currentSeries = [];
    let currentQuestion = 0;
    let score = 0;
    let isAnswering = false;

    // --- FUNCIONES AUXILIARES ---
    function getRandomInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
    function getRandomItem(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

    // --- GENERADORES DE PROBLEMAS (4¬∫ PRIMARIA) ---

    // NIVEL 1: ESCALADOR (Grandes n√∫meros, Multiplicaci√≥n, Divisi√≥n sencilla)
    function generateEasy() {
        let scenario = getRandomInt(1, 3);
        let problem = {};
        let name = getRandomItem(names);

        if (scenario === 1) { // Sumas/Restas n√∫meros grandes (Poblaci√≥n/Viajeros)
            let n1 = getRandomInt(2000, 8000);
            let n2 = getRandomInt(1000, 4000);
            let total = n1 + n2;
            problem.text = `En el estadio de f√∫tbol hab√≠a <span class="data-highlight">${n1}</span> personas. Han llegado <span class="data-highlight">${n2}</span> personas m√°s para ver el partido.<br><br>¬øCu√°ntos espectadores hay en total?`;
            problem.correct = total;
        } else if (scenario === 2) { // Multiplicaci√≥n (Inventario)
            let cajas = getRandomInt(15, 45);
            let unidades = getRandomInt(12, 25);
            let total = cajas * unidades;
            problem.text = `En el almac√©n hemos recibido <span class="data-highlight">${cajas}</span> cajas de libros. Si cada caja contiene <span class="data-highlight">${unidades}</span> libros...<br><br>¬øCu√°ntos libros hemos recibido?`;
            problem.correct = total;
        } else { // Divisi√≥n (Reparto simple)
            let total = getRandomInt(100, 300);
            let bolsas = getRandomInt(4, 9);
            total = Math.ceil(total / bolsas) * bolsas; // Ajuste exacto
            let res = total / bolsas;
            problem.text = `Tenemos <span class="data-highlight">${total}</span> caramelos y queremos guardarlos en <span class="data-highlight">${bolsas}</span> frascos iguales.<br><br>¬øCu√°ntos caramelos meteremos en cada frasco?`;
            problem.correct = res;
        }
        return problem;
    }

    // NIVEL 2: CIENT√çFICO (Fracciones de un n√∫mero, Dinero complejo, Mixtos)
    function generateMedium() {
        let scenario = getRandomInt(1, 3);
        let problem = {};
        
        if (scenario === 1) { // Fracciones de un n√∫mero (Concepto clave 4¬∫)
            let total = getRandomInt(20, 60);
            let fracs = [ {den: 2, name: "La mitad"}, {den: 3, name: "Un tercio"}, {den: 4, name: "La cuarta parte"} ];
            let frac = getRandomItem(fracs);
            // Ajustar total para que sea divisible
            total = Math.ceil(total / frac.den) * frac.den;
            let res = total / frac.den;
            
            problem.text = `En la clase hay <span class="data-highlight">${total}</span> alumnos. <span class="data-highlight">${frac.name}</span> lleva gafas.<br><br>¬øCu√°ntos alumnos llevan gafas?`;
            problem.correct = res;
        } else if (scenario === 2) { // Dinero (Compra + Vuelta)
            let item = getRandomItem(storeItems);
            let qty = getRandomInt(2, 4);
            let cost = item.price * qty;
            let pay = Math.ceil(cost/50)*50 + 50; // Paga con billete grande
            if (pay > 200) pay = 200;
            if (cost > pay) pay = cost + 20;

            let change = pay - cost;
            problem.text = `Compramos <span class="data-highlight">${qty}</span> ${item.name}s a <span class="data-highlight">${item.price} ‚Ç¨</span> cada uno. Pagamos con <span class="data-highlight">${pay} ‚Ç¨</span>.<br><br>¬øCu√°nto nos devuelven?`;
            problem.correct = change;
        } else { // Operaciones combinadas (Suma y divisi√≥n/resta)
            let dias = getRandomInt(3, 7);
            let paginas = getRandomInt(80, 200);
            // Ajustar para divisi√≥n exacta
            paginas = Math.ceil(paginas / dias) * dias;
            let res = paginas / dias;
            let name = getRandomItem(names);
            
            problem.text = `${name} se ha le√≠do un libro de <span class="data-highlight">${paginas}</span> p√°ginas en <span class="data-highlight">${dias}</span> d√≠as, leyendo siempre lo mismo.<br><br>¬øCu√°ntas p√°ginas ley√≥ cada d√≠a?`;
            problem.correct = res;
        }
        return problem;
    }

    // NIVEL 3: ASTRONAUTA (L√≥gica combinatoria, Medidas, Problemas inversos)
    function generateHard() {
        let scenario = getRandomInt(1, 3);
        let problem = {};
        
        if (scenario === 1) { // Combinatoria (Recuento sistem√°tico)
            let partesArriba = getRandomInt(3, 6); // Camisetas
            let partesAbajo = getRandomInt(3, 5); // Pantalones
            let total = partesArriba * partesAbajo;
            let name = getRandomItem(names);
            
            problem.text = `${name} tiene <span class="data-highlight">${partesArriba}</span> camisetas de colores y <span class="data-highlight">${partesAbajo}</span> pantalones distintos.<br><br>¬øDe cu√°ntas formas diferentes puede vestirse?`;
            problem.correct = total;
        } else if (scenario === 2) { // Medidas (Dos pasos: Total -> Envasado)
            let sacos = getRandomInt(5, 12);
            let pesoSaco = getRandomInt(20, 50); // kg
            let pesoBolsa = getRandomInt(2, 5); // kg
            // Ajuste para divisi√≥n exacta
            pesoSaco = Math.ceil(pesoSaco / pesoBolsa) * pesoBolsa;
            
            let totalPeso = sacos * pesoSaco;
            let bolsas = totalPeso / pesoBolsa;
            
            problem.text = `Un agricultor tiene <span class="data-highlight">${sacos}</span> sacos de patatas de <span class="data-highlight">${pesoSaco} kg</span> cada uno. Quiere envasar todo en bolsas de <span class="data-highlight">${pesoBolsa} kg</span>.<br><br>¬øCu√°ntas bolsas llenar√°?`;
            problem.correct = bolsas;
        } else { // Fracci√≥n inversa (resto)
            let total = getRandomInt(24, 48);
            // Divisible por 3, 4 o 6
            let den = [3, 4, 6][getRandomInt(0, 2)];
            total = Math.ceil(total / den) * den;
            
            let parte = total / den;
            let resto = total - parte;
            let fraccionTexto = den === 3 ? "un tercio" : (den === 4 ? "la cuarta parte" : "la sexta parte");
            
            problem.text = `De los <span class="data-highlight">${total}</span> alumnos de 4¬∫, <span class="data-highlight">${fraccionTexto}</span> va a f√∫tbol y el resto a m√∫sica.<br><br>¬øCu√°ntos van a m√∫sica?`;
            problem.correct = resto;
        }
        return problem;
    }

    function generateOptions(correctAnswer) {
        let options = new Set();
        options.add(correctAnswer);
        
        while (options.size < 3) {
            // Generar errores plausibles
            let errorType = getRandomInt(1, 4);
            let fake;
            if (errorType === 1) fake = correctAnswer + getRandomInt(-5, 5); // Error c√°lculo
            else if (errorType === 2) fake = correctAnswer + 10; // Error decena
            else if (errorType === 3) fake = Math.floor(correctAnswer * 2); // Error operaci√≥n (x en vez de /)
            else fake = Math.floor(correctAnswer / 2) || correctAnswer + 2; 

            if (fake > 0 && fake !== correctAnswer) {
                options.add(fake);
            }
        }
        return Array.from(options).sort(() => Math.random() - 0.5);
    }

    // --- L√ìGICA DEL JUEGO ---

    function startGame(level) {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'block';
        
        let label = "";
        if(level === 'easy') label = "Escalador";
        if(level === 'medium') label = "Cient√≠fico";
        if(level === 'hard') label = "Astronauta";
        document.getElementById('level-label').innerText = label;

        score = 0;
        currentQuestion = 0;
        currentSeries = [];

        for(let i=0; i<10; i++) {
            let p;
            if(level === 'easy') p = generateEasy();
            if(level === 'medium') p = generateMedium();
            if(level === 'hard') p = generateHard();
            p.options = generateOptions(p.correct);
            currentSeries.push(p);
        }
        renderQuestion();
    }

    function renderQuestion() {
        isAnswering = false;
        let q = currentSeries[currentQuestion];
        
        document.getElementById('q-number').innerText = currentQuestion + 1;
        document.getElementById('progress-bar').style.width = ((currentQuestion) * 10) + "%";
        
        document.getElementById('problem-text').innerHTML = q.text;
        
        let feedback = document.getElementById('feedback-area');
        feedback.innerHTML = "";
        feedback.className = "feedback";

        let optionsHTML = "";
        q.options.forEach(opt => {
            optionsHTML += `<button class="option-btn" onclick="checkAnswer(${opt}, this)">${opt}</button>`;
        });
        document.getElementById('options-area').innerHTML = optionsHTML;
    }

    function checkAnswer(selectedVal, btnElement) {
        if(isAnswering) return;
        isAnswering = true;

        let correctVal = currentSeries[currentQuestion].correct;
        let feedback = document.getElementById('feedback-area');

        if(selectedVal === correctVal) {
            score++;
            btnElement.style.backgroundColor = "#0fb9b1"; 
            btnElement.style.color = "white";
            btnElement.style.borderColor = "#0fb9b1";
            feedback.innerHTML = "¬°EXACTO! üåü";
            feedback.classList.add("correct");
        } else {
            btnElement.style.backgroundColor = "#eb3b5a"; 
            btnElement.style.color = "white";
            btnElement.style.borderColor = "#eb3b5a";
            feedback.innerHTML = `¬°Vaya! Era ${correctVal}`;
            feedback.classList.add("incorrect");
        }

        setTimeout(() => {
            currentQuestion++;
            if(currentQuestion < 10) {
                renderQuestion();
            } else {
                showResults();
            }
        }, 2500);
    }

    function showResults() {
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-score').innerText = score;
        
        let msg = "";
        if(score === 10) msg = "¬°Nivel Experto Desbloqueado! üèÜ";
        else if(score >= 8) msg = "¬°Impresionante! Casi perfecto. üöÄ";
        else if(score >= 5) msg = "¬°Bien hecho! A seguir as√≠. üëç";
        else msg = "¬°No te rindas! Int√©ntalo de nuevo. üí™";
        
        document.getElementById('final-message').innerText = msg;
    }

</script>
</p></div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Licencia Creative Commons Reconocimiento Compartir igual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="3_olimpiadas_robticas.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="4_aventura_submarina.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Creado con eXeLearning<span> (Ventana nueva)</span></span></a></p><script type="text/javascript" src="_simplepoint_js.js"></script></body></html>