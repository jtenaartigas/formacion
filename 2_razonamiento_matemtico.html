<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>2¬∫ Razonamiento matem√°tico | Formaci√≥n en Centros - Ceip Joaqu√≠n Tena Artigas </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Ceip Joaqu√≠n Tena Artigas de Alcolea (C√≥rdoba)" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.9 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-11"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegaci√≥n</a></p>
<header id="header" ><div id="headerContent">Formaci√≥n en Centros - Ceip Joaqu√≠n Tena Artigas</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Inicio</a></li>
   <li><a href="formacin_en_centros_2425.html" class="daddy">Formaci√≥n en Centros 24-25</a>
   <ul class="other-section">
      <li><a href="itinerario_infantil.html" class="no-ch">Itinerario Infantil</a></li>
      <li><a href="itinerario_1_ciclo.html" class="no-ch">Itinerario 1¬∫ Ciclo</a></li>
      <li><a href="itinerario_2_ciclo.html" class="no-ch">Itinerario 2¬∫ Ciclo</a></li>
      <li><a href="itinerario_3_ciclo.html" class="no-ch">Itinerario 3¬∫ Ciclo</a></li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="formacin_en_centros_2526.html" class="current-page-parent daddy">Formaci√≥n en Centros 25-26</a>
   <ul>
      <li><a href="infantil.html" class="no-ch">Infantil</a></li>
      <li><a href="1_razonamiento_matemtico.html" class="no-ch">1¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="1_comprensin_lectora.html" class="no-ch">1¬∫ Comprensi√≥n lectora</a></li>
      <li id="active"><a href="2_razonamiento_matemtico.html" class="active no-ch">2¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="seccin.html" class="no-ch">Secci√≥n</a></li>
      <li><a href="3_razonamiento_matemtico.html" class="no-ch">3¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="seccin0.html" class="no-ch">Secci√≥n</a></li>
      <li><a href="4_razonamiento_matemtico.html" class="no-ch">4¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="seccin1.html" class="no-ch">Secci√≥n</a></li>
      <li><a href="5_razonamiento_matemtico.html" class="no-ch">5¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="seccin2.html" class="no-ch">Secci√≥n</a></li>
      <li><a href="6_razonamiento_matemtico.html" class="no-ch">6¬∫ Razonamiento matem√°tico</a></li>
      <li><a href="seccin3.html" class="no-ch">Secci√≥n</a></li>
   </ul>
   </li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="1_comprensin_lectora.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="seccin.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">2¬∫ Razonamiento matem√°tico</h1></header>
<article class="iDevice_wrapper textIdevice" id="id46">
<div class="iDevice emphasis0" >
<div id="ta46_147_2" class="block iDevice_content">
<div class="exe-text"><p></p>
<style>
    /* IMPORTACI√ìN DE FUENTES */
    @font-face {
        font-family: 'Escolar';
        src: url('Escolar_G.TTF') format('truetype');
        font-weight: normal;
    }
    @font-face {
        font-family: 'Escolar';
        src: url('Escolar_N.TTF') format('truetype');
        font-weight: bold;
    }

    :root {
        /* Paleta de colores */
        --color-facil: #00cec9;
        --color-medio: #6c5ce7;
        --color-dificil: #e17055;
        --color-bg: #dfe6e9;
        --color-card: #ffffff;
        --text-color: #2d3436;
    }

    body {
        font-family: 'Escolar', 'Comic Sans MS', cursive, sans-serif;
        background-color: var(--color-bg);
        background-image: 
            linear-gradient(#b2bec3 1px, transparent 1px), 
            linear-gradient(90deg, #b2bec3 1px, transparent 1px);
        background-size: 20px 20px;
        margin: 0;
        padding: 10px;
        color: var(--text-color);
        min-height: auto; 
    }

    .app-container {
        width: 100%;
        max-width: 750px;
        margin: 0 auto;
        background: var(--color-card);
        border-radius: 25px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        padding: 25px;
        border: 5px solid #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        box-sizing: border-box;
    }

    /* PANTALLA INICIO */
    #start-screen {
        text-align: center;
        width: 100%;
    }

    h1 {
        font-family: 'Escolar', cursive;
        font-weight: bold;
        font-size: 2.5em;
        color: #e84393;
        margin-bottom: 5px;
        text-shadow: 2px 2px 0 #ffeaa7;
    }

    .subtitle {
        font-size: 1.4em;
        color: #636e72;
        margin-bottom: 30px;
        font-weight: bold;
    }

    .level-container {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
    }

    /* BOTONES DE NIVEL REPROGRAMADOS (DIVS en lugar de BUTTONS para evitar errores de renderizado) */
    .level-btn {
        font-family: 'Escolar', cursive;
        font-weight: bold;
        font-size: 1.4em;
        padding: 20px;
        border-radius: 20px;
        cursor: pointer;
        color: white;
        transition: transform 0.2s, box-shadow 0.2s;
        width: 200px;
        max-width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        text-align: center;
        user-select: none;
    }

    .level-btn:hover { transform: translateY(-4px); }
    
    .btn-easy { 
        background-color: var(--color-facil); 
        box-shadow: 0 6px 0 #008f72; 
    }
    .btn-medium { 
        background-color: var(--color-medio); 
        box-shadow: 0 6px 0 #0960a5; 
    }
    .btn-hard { 
        background-color: var(--color-dificil); 
        box-shadow: 0 6px 0 #b71515; 
    }

    .icon-level { font-size: 2em; margin-bottom: 5px; display: block; line-height: 1; }
    .text-level { display: block; width: 100%; }

    /* PANTALLA JUEGO */
    #game-screen {
        display: none;
        width: 100%;
        text-align: center;
    }

    .header-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        width: 100%;
        font-size: 1.1em;
        color: #aaa;
    }

    .progress-bar-container {
        width: 100%;
        height: 12px;
        background-color: #dfe6e9;
        border-radius: 10px;
        margin-bottom: 20px;
        overflow: hidden;
    }

    .progress-bar {
        height: 100%;
        background-color: #fdcb6e;
        width: 0%;
        transition: width 0.5s;
    }

    .problem-card {
        background: #fff;
        border: 3px solid #74b9ff;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 25px;
        font-size: 1.5em;
        line-height: 1.4;
        min-height: 140px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        box-shadow: inset 0 0 20px rgba(116, 185, 255, 0.1);
        position: relative;
    }

    .data-highlight {
        color: #d63031;
        font-weight: bold;
        background: #ffeaa7;
        padding: 0 4px;
        border-radius: 4px;
    }

    .options-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 15px;
        margin-bottom: 10px;
    }

    .option-btn {
        font-family: 'Escolar', cursive;
        font-weight: bold;
        font-size: 1.8em;
        padding: 15px;
        background: white;
        border: 3px solid #6c5ce7;
        border-radius: 15px;
        cursor: pointer;
        color: #6c5ce7;
        transition: all 0.2s;
        box-shadow: 0 4px 0 rgba(108, 92, 231, 0.2);
    }

    .option-btn:hover {
        transform: translateY(-2px);
        background: #6c5ce7;
        color: white;
    }
    
    .option-btn:active {
        transform: translateY(2px);
        box-shadow: none;
    }

    .feedback {
        margin-top: 10px;
        font-size: 1.8em;
        font-weight: bold;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .feedback.correct { color: #00b894; }
    .feedback.incorrect { color: #d63031; }

    /* PANTALLA RESULTADOS */
    #result-screen {
        display: none;
        text-align: center;
    }

    .score-circle {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background: #fdcb6e;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 20px auto;
        border: 5px solid #e17055;
        font-size: 4em;
        color: #fff;
        text-shadow: 2px 2px 0 rgba(0,0,0,0.2);
        font-weight: bold;
    }

    .home-btn {
        background-color: #2d3436;
        color: white;
        padding: 15px 35px;
        border-radius: 50px;
        font-size: 1.4em;
        border: none;
        cursor: pointer;
        font-family: 'Escolar', cursive;
        box-shadow: 0 5px 0 #000;
        margin-top: 20px;
    }
    .home-btn:hover { transform: scale(1.05); }

</style>
<div class="app-container"><!-- PANTALLA INICIO -->
<div id="start-screen">
<h1>üöÄ Mates 2¬∫ Primaria</h1>
<p class="subtitle">Resoluci√≥n de Problemas</p>
<p style="font-size: 1.6em; margin-bottom: 25px;">¬øHasta d√≥nde quieres llegar?</p>
<div class="level-container"><!-- BOTONES MEJORADOS: Usamos DIV en vez de BUTTON para asegurar capas unidas -->
<div class="level-btn btn-easy" onclick="startGame('easy')"><span class="icon-level">üö≤</span>
<div class="text-level">Paseo<br /><span style="font-size: 0.7em; font-weight: normal;">N√∫meros hasta 99</span></div>
</div>
<div class="level-btn btn-medium" onclick="startGame('medium')"><span class="icon-level">üõµ</span>
<div class="text-level">Carrera<br /><span style="font-size: 0.7em; font-weight: normal;">Centenas y "x"</span></div>
</div>
<div class="level-btn btn-hard" onclick="startGame('hard')"><span class="icon-level">üèéÔ∏è</span>
<div class="text-level">Gran Premio<br /><span style="font-size: 0.7em; font-weight: normal;">Retos y Dinero</span></div>
</div>
</div>
<p style="margin-top: 30px; color: #aaa; font-size: 1em;">Basado en problemas reales de 2¬∫ de Primaria.</p>
</div>
<!-- PANTALLA JUEGO -->
<div id="game-screen">
<div class="header-info"><span>Nivel: <span id="level-label" style="font-weight: bold;"></span></span> <span>Problema <span id="q-number">1</span>/10</span></div>
<div class="progress-bar-container">
<div class="progress-bar" id="progress-bar"></div>
</div>
<div class="problem-card" id="problem-card"><!-- Eliminada la etiqueta de ayuda visual -->
<div id="problem-text"><!-- El texto del problema aparece aqu√≠ --></div>
</div>
<div class="options-container" id="options-area"><!-- Botones generados por JS --></div>
<div class="feedback" id="feedback-area"></div>
</div>
<!-- PANTALLA RESULTADOS -->
<div id="result-screen">
<h1>¬°Meta Alcanzada! üèÅ</h1>
<p style="font-size: 1.6em;">Has acertado:</p>
<div class="score-circle"><span id="final-score">0</span></div>
<div id="final-message" style="font-size: 1.6em; margin-bottom: 20px; color: #0984e3; padding: 0 20px;"></div>
<button class="home-btn" onclick="location.reload()">üîÑ Jugar Otra Vez</button></div>
</div>
<p>
<script>
    // --- DATOS Y CONTEXTOS ---
    
    const names = ["Luc√≠a", "Marcos", "Paula", "Diego", "Elena", "Javier", "Carmen", "Leo", "Aitana", "Mateo"];
    
    const items = [
        { name: "cromos", gender: "m", icon: "üÉè" },
        { name: "canicas", gender: "f", icon: "‚ö™" },
        { name: "libros", gender: "m", icon: "üìö" },
        { name: "flores", gender: "f", icon: "üåª" },
        { name: "coches", gender: "m", icon: "üöó" },
        { name: "galletas", gender: "f", icon: "üç™" }
    ];

    let currentSeries = [];
    let currentQuestion = 0;
    let score = 0;
    let isAnswering = false;

    // --- FUNCIONES AUXILIARES ---
    function getRandomInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
    function getRandomItem(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

    // --- GENERADORES DE PROBLEMAS (SIN PISTAS) ---

    // NIVEL 1
    function generateEasy() {
        let scenario = getRandomInt(1, 3);
        let problem = {};
        let name = getRandomItem(names);

        if (scenario === 1) { // Suma
            let n1 = getRandomInt(20, 50);
            let n2 = getRandomInt(15, 40);
            let total = n1 + n2;
            problem.text = `${name} ten√≠a <span class="data-highlight">${n1}</span> cromos de f√∫tbol. Su t√≠o le regala <span class="data-highlight">${n2}</span> cromos m√°s.<br><br>¬øCu√°ntos cromos tiene ahora en total?`;
            problem.correct = total;
        } else if (scenario === 2) { // Resta
            let totalPages = getRandomInt(60, 99);
            let read = getRandomInt(10, 50);
            let left = totalPages - read;
            problem.text = `Un cuento tiene <span class="data-highlight">${totalPages}</span> p√°ginas. Si ${name} ya ha le√≠do <span class="data-highlight">${read}</span> p√°ginas.<br><br>¬øCu√°ntas le faltan para acabar?`;
            problem.correct = left;
        } else { // Comparaci√≥n
            let n1 = getRandomInt(30, 90);
            let n2 = getRandomInt(10, 25);
            let total = n1 - n2;
            problem.text = `En el gimnasio hay <span class="data-highlight">${n1}</span> pelotas verdes y <span class="data-highlight">${n2}</span> pelotas rojas.<br><br>¬øCu√°ntas pelotas verdes hay M√ÅS que rojas?`;
            problem.correct = total;
        }
        return problem;
    }

    // NIVEL 2
    function generateMedium() {
        let scenario = getRandomInt(1, 3);
        let problem = {};
        
        if (scenario === 1) { // Suma Centenas
            let n1 = getRandomInt(120, 450);
            let n2 = getRandomInt(110, 320);
            let total = n1 + n2;
            problem.text = `En la biblioteca del colegio hay <span class="data-highlight">${n1}</span> libros de aventuras y <span class="data-highlight">${n2}</span> libros de animales.<br><br>¬øCu√°ntos libros hay en total?`;
            problem.correct = total;
        } else if (scenario === 2) { // Resta Centenas
            let n1 = getRandomInt(500, 950);
            let n2 = getRandomInt(200, 450);
            let total = n1 - n2;
            problem.text = `Un tren lleva <span class="data-highlight">${n1}</span> pasajeros. En la primera estaci√≥n se bajan <span class="data-highlight">${n2}</span>.<br><br>¬øCu√°ntos pasajeros quedan en el tren?`;
            problem.correct = total;
        } else { // Multiplicaci√≥n
            let groups = getRandomInt(2, 6);
            let perGroup = getRandomInt(2, 10);
            if(perGroup === 2) groups = getRandomInt(4, 9);
            
            let item = getRandomItem(items);
            let total = groups * perGroup;
            problem.text = `Hay <span class="data-highlight">${groups}</span> cajas. En cada caja hay <span class="data-highlight">${perGroup}</span> ${item.name}.<br><br>¬øCu√°ntos ${item.name} hay en total?`;
            problem.correct = total;
        }
        return problem;
    }

    // NIVEL 3
    function generateHard() {
        let scenario = getRandomInt(1, 3);
        let problem = {};
        
        if (scenario === 1) { // Dinero
            let price = getRandomInt(25, 85);
            let money = 100;
            if (price < 50) money = 50;
            
            let change = money - price;
            problem.text = `Quiero comprar un videojuego que cuesta <span class="data-highlight">${price}‚Ç¨</span>. Si pago con un billete de <span class="data-highlight">${money}‚Ç¨</span>...<br><br>¬øCu√°nto dinero me devuelven?`;
            problem.correct = change;
        } else if (scenario === 2) { // Dos pasos
            let inicial = getRandomInt(50, 100);
            let ganados = getRandomInt(20, 40);
            let perdidos = getRandomInt(10, 30);
            let final = inicial + ganados - perdidos;
            let name = getRandomItem(names);
            
            problem.text = `${name} ten√≠a <span class="data-highlight">${inicial}</span> puntos. Gan√≥ <span class="data-highlight">${ganados}</span> en la primera ronda, pero luego perdi√≥ <span class="data-highlight">${perdidos}</span>.<br><br>¬øCu√°ntos puntos tiene al final?`;
            problem.correct = final;
        } else { // Reparto
            let total = getRandomInt(12, 30);
            let divisors = [2, 3, 4, 5];
            let divisor = divisors[Math.floor(Math.random() * divisors.length)];
            total = Math.ceil(total / divisor) * divisor;
            let res = total / divisor;
            
            problem.text = `Tenemos <span class="data-highlight">${total}</span> caramelos para repartir en partes iguales entre <span class="data-highlight">${divisor}</span> amigos.<br><br>¬øCu√°ntos caramelos tocan a cada uno?`;
            problem.correct = res;
        }
        return problem;
    }

    function generateOptions(correctAnswer) {
        let options = new Set();
        options.add(correctAnswer);
        
        while (options.size < 3) {
            let errorType = getRandomInt(1, 3);
            let fake;
            if (errorType === 1) fake = correctAnswer + getRandomInt(-2, 2);
            else if (errorType === 2) fake = correctAnswer + 10;
            else fake = correctAnswer - 10;

            if (fake > 0 && fake !== correctAnswer) {
                options.add(fake);
            }
        }
        return Array.from(options).sort(() => Math.random() - 0.5);
    }

    // --- L√ìGICA DEL JUEGO ---

    function startGame(level) {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'block';
        
        let label = "";
        if(level === 'easy') label = "Paseo";
        if(level === 'medium') label = "Carrera";
        if(level === 'hard') label = "Gran Premio";
        document.getElementById('level-label').innerText = label;

        score = 0;
        currentQuestion = 0;
        currentSeries = [];

        for(let i=0; i<10; i++) {
            let p;
            if(level === 'easy') p = generateEasy();
            if(level === 'medium') p = generateMedium();
            if(level === 'hard') p = generateHard();
            p.options = generateOptions(p.correct);
            currentSeries.push(p);
        }
        renderQuestion();
    }

    function renderQuestion() {
        isAnswering = false;
        let q = currentSeries[currentQuestion];
        
        document.getElementById('q-number').innerText = currentQuestion + 1;
        document.getElementById('progress-bar').style.width = ((currentQuestion) * 10) + "%";
        
        document.getElementById('problem-text').innerHTML = q.text;
        
        let feedback = document.getElementById('feedback-area');
        feedback.innerHTML = "";
        feedback.className = "feedback";

        let optionsHTML = "";
        q.options.forEach(opt => {
            optionsHTML += `<button class="option-btn" onclick="checkAnswer(${opt}, this)">${opt}</button>`;
        });
        document.getElementById('options-area').innerHTML = optionsHTML;
    }

    function checkAnswer(selectedVal, btnElement) {
        if(isAnswering) return;
        isAnswering = true;

        let correctVal = currentSeries[currentQuestion].correct;
        let feedback = document.getElementById('feedback-area');

        if(selectedVal === correctVal) {
            score++;
            btnElement.style.backgroundColor = "#00b894"; 
            btnElement.style.color = "white";
            btnElement.style.borderColor = "#00b894";
            feedback.innerHTML = "¬°EXACTO! üéâ";
            feedback.classList.add("correct");
        } else {
            btnElement.style.backgroundColor = "#d63031"; 
            btnElement.style.color = "white";
            btnElement.style.borderColor = "#d63031";
            feedback.innerHTML = `¬°Oh! La respuesta era ${correctVal}`;
            feedback.classList.add("incorrect");
        }

        setTimeout(() => {
            currentQuestion++;
            if(currentQuestion < 10) {
                renderQuestion();
            } else {
                showResults();
            }
        }, 2500);
    }

    function showResults() {
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-score').innerText = score;
        
        let msg = "";
        if(score === 10) msg = "¬°Incre√≠ble! ¬°Eres un genio matem√°tico! üèÜ";
        else if(score >= 8) msg = "¬°Genial! Est√°s hecho un experto. üåü";
        else if(score >= 5) msg = "¬°Buen trabajo! Sigue practicando. üëç";
        else msg = "No te rindas, ¬°la pr√≥xima saldr√° mejor! üí™";
        
        document.getElementById('final-message').innerText = msg;
    }

</script>
</p></div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Licencia Creative Commons Reconocimiento Compartir igual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="1_comprensin_lectora.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="seccin.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Creado con eXeLearning<span> (Ventana nueva)</span></span></a></p><script type="text/javascript" src="_simplepoint_js.js"></script></body></html>